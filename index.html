<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <title>Coiffeurs Blagueurs</title>
    <link rel="icon" type="image/png" sizes="32x32" href="/pics/favicon-32x32.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400&amp;display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jgthms/minireset.css@master/minireset.min.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" />
    <link rel="stylesheet" href="/css/coiffeurs.css" />
    <link rel="stylesheet" href="/css/menu.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>
  </head>
  <body>
    <div class="container">
      <nav class="fixed-nav-bar">
        <div id="menu" class="menu">
          <a class="sitename" href="fixed-navigation-bar.html">Fixed Nav Bar</a>
          <ul class="menu-items">
            <li>
              <a href="#globalmap">Carte globale</a>
            </li>
            <li>
              <a href="#stats">Stats & Palmarès</a>
            </li>
            <li>
              <a href="#dmap">Stats par département</a>
            </li>
            <li>
              <a href="#about">Infos & Méthodo</a>
            </li>
            <li>
              <a href="https://github.com/tifhair/tifhair-tools">Github</a>
            </li>
          </ul>
        </div>
      </nav>
      <h1>
        Les coiffeurs sont des blagueurs
      </h1>
      <section id="globalmap">
        <h2>
          Carte globale
        </h2>
        <div class="filters">
          <label>Filter par Nom:<input class="filter" id="filter_name" type="search" placeholder="Établissement" /></label><label>Filter par Departement:<select id="filter_dept" class="filter">
              <option value="*" selected="selected">
                *
              </option>
              <option value="01">
                01
              </option>
              <option value="02">
                02
              </option>
              <option value="03">
                03
              </option>
              <option value="04">
                04
              </option>
              <option value="05">
                05
              </option>
              <option value="06">
                06
              </option>
              <option value="07">
                07
              </option>
              <option value="08">
                08
              </option>
              <option value="09">
                09
              </option>
              <option value="10">
                10
              </option>
              <option value="11">
                11
              </option>
              <option value="12">
                12
              </option>
              <option value="13">
                13
              </option>
              <option value="14">
                14
              </option>
              <option value="15">
                15
              </option>
              <option value="16">
                16
              </option>
              <option value="17">
                17
              </option>
              <option value="18">
                18
              </option>
              <option value="19">
                19
              </option>
              <option value="20">
                20
              </option>
              <option value="21">
                21
              </option>
              <option value="22">
                22
              </option>
              <option value="23">
                23
              </option>
              <option value="24">
                24
              </option>
              <option value="25">
                25
              </option>
              <option value="26">
                26
              </option>
              <option value="27">
                27
              </option>
              <option value="28">
                28
              </option>
              <option value="29">
                29
              </option>
              <option value="30">
                30
              </option>
              <option value="31">
                31
              </option>
              <option value="32">
                32
              </option>
              <option value="33">
                33
              </option>
              <option value="34">
                34
              </option>
              <option value="35">
                35
              </option>
              <option value="36">
                36
              </option>
              <option value="37">
                37
              </option>
              <option value="38">
                38
              </option>
              <option value="39">
                39
              </option>
              <option value="40">
                40
              </option>
              <option value="41">
                41
              </option>
              <option value="42">
                42
              </option>
              <option value="43">
                43
              </option>
              <option value="44">
                44
              </option>
              <option value="45">
                45
              </option>
              <option value="46">
                46
              </option>
              <option value="47">
                47
              </option>
              <option value="48">
                48
              </option>
              <option value="49">
                49
              </option>
              <option value="50">
                50
              </option>
              <option value="51">
                51
              </option>
              <option value="52">
                52
              </option>
              <option value="53">
                53
              </option>
              <option value="54">
                54
              </option>
              <option value="55">
                55
              </option>
              <option value="56">
                56
              </option>
              <option value="57">
                57
              </option>
              <option value="58">
                58
              </option>
              <option value="59">
                59
              </option>
              <option value="60">
                60
              </option>
              <option value="61">
                61
              </option>
              <option value="62">
                62
              </option>
              <option value="63">
                63
              </option>
              <option value="64">
                64
              </option>
              <option value="65">
                65
              </option>
              <option value="66">
                66
              </option>
              <option value="67">
                67
              </option>
              <option value="68">
                68
              </option>
              <option value="69">
                69
              </option>
              <option value="70">
                70
              </option>
              <option value="71">
                71
              </option>
              <option value="72">
                72
              </option>
              <option value="73">
                73
              </option>
              <option value="74">
                74
              </option>
              <option value="75">
                75
              </option>
              <option value="76">
                76
              </option>
              <option value="77">
                77
              </option>
              <option value="78">
                78
              </option>
              <option value="79">
                79
              </option>
              <option value="80">
                80
              </option>
              <option value="81">
                81
              </option>
              <option value="82">
                82
              </option>
              <option value="83">
                83
              </option>
              <option value="84">
                84
              </option>
              <option value="85">
                85
              </option>
              <option value="86">
                86
              </option>
              <option value="87">
                87
              </option>
              <option value="88">
                88
              </option>
              <option value="89">
                89
              </option>
              <option value="90">
                90
              </option>
              <option value="91">
                91
              </option>
              <option value="92">
                92
              </option>
              <option value="93">
                93
              </option>
              <option value="94">
                94
              </option>
              <option value="95">
                95
              </option>
              <option value="97">
                97
              </option>
            </select></label><label>Filter par Ville:<input class="filter" id="filter_ville" type="search" placeholder="Ville" /></label>
        </div>
        <div id="mapid"></div>
        <aside>
          <p id="resultcount"></p>
          <ul id="listecoiffeurs" title="Cliquez pour zoomer!"></ul>
        </aside>
      </section>
      <section id="stats">
        <h2>
          Statistiques et palmarès
        </h2>
        <div class="palmares">
          <h3>
            D'abord quelques chiffres:
          </h3>
          <p>
            <ul>
              <li>
                Il y a 46 salons actifs qui avec un dérivé de "caract'hair"
              </li>
              <li>
                Il y a 60 salons actifs qui avec un dérivé de "Atmosp'hair"
              </li>
              <li>
                Il y a 85 salons actifs qui avec un dérivé de "Imagin'hair"
              </li>
              <li>
                Il y a 63 salons actifs qui avec un dérivé de "Bulles d'hair"
              </li>
              <li>
                Il y a 46 salons actifs qui avec un dérivé de "caract'hair"
              </li>
            </ul>
          </p>
          <h3>
            Palmarès d'excellents calembours
          </h3>
          <p>
            Bien qu'il ne soit plus en activité, le salon <a target="_blank" href="https://maps.google.com/?q=A+Thaon+Tifs ">A Thaon Tifs</a> à Thaon (Calvados) réalise un jeu de mot animalier. D'autres, encore en activité aiment aussi les animaux:
            <ul>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=HAIR%27IS%27SON 25+CRS+DE+LA+PLACE+SAINT-ANDRE-DE-SANGONIS">HAIR'IS'SON</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=VIP%27HAIR 74+GRANDE+RUE+PONT-DE-VEYLE">VIP'HAIR</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=BUTT%27HAIR+FLY 45+RUE+DU+GENERAL+DE+GAULLE+SEREMANGE-ERZANGE">BUTT'HAIR FLY</a>
              </li>
            </ul>
          </p>
          <p>
            Certains salons semblent avoir tenté des jeux de mots, pas tout à fait heureux, ou avec le mauvais champs lexical:
            <ul>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=ABCD+TIF LE+MAILLARD+ANCY">ABCD TIF</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=ARTIST%27TIF 10+RUE+COLONEL+A+LEFEBVRE+CHAMPSECRET">ARTIST'TIF</a>
              </li>
            </ul>
          </p>
          <p>
            Des phrases et locutions:
            <ul>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=AU+PAYS+DES+M%27HAIR+VEILLES 8+GRANDE+RUE+LANTENNE-VERTIERE">AU PAYS DES M'HAIR VEILLES</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=AINSI+SOIT+TIF 25+PL+GENISSIEU+CHABEUIL">AINSI SOIT TIF</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=AH+QUE+TIFS 927+RUE+DU+CHEMIN+VERT+SAUMUR">AH QUE TIFS</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=TELLE+M%27HAIR+TELLE+FILLE CHAMPAGNE+CHAMPAGNE-EN-VALROMEY">TELLE M'HAIR TELLE FILLE</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=SAVOIR+COIF+HAIR 4+PL+DE+LA+POSTE+LES+PIEUX">SAVOIR COIF HAIR</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=FAUDRA+TIF+HAIR 19+RUE+DE+LA+PREFECTURE+DIJON">FAUDRA TIF HAIR</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=LE+BEST+C+L%27HAIR 30+RUE+DE+DINAN+GEVEZE">LE BEST C L'HAIR</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=ALT%27HAIR++%26+GO 42+BD+HERAULT+SAINT-BRIEUC">ALT'HAIR  & GO</a>
              </li>
            </ul>
          </p>
          <p>
            Plusieurs salons ont des noms en rapport avec la région:
            <ul>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=CORS%27HAIR 67+RUE+VILLE+PEPIN+SAINT-MALO">CORS'HAIR</a> à Saint-Malo
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=FINIST%27HAIR CENTRE+COMMERCIAL+AR+ROUDOUR+GUERLESQUIN">FINIST'HAIR</a> en Bretagne
              </li>
            </ul>
          </p>
          <p>
            Ceux-ci semblent pouvoir fournir des services... 'différents':
            <ul>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=CED%27A+TIF 6+RUE+DU+CENTRE+CHANGE">CED'A TIF</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=ADULT%27HAIR 37+RUE+GABRIEL+PERI+GRENOBLE">ADULT'HAIR</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=MISSION+HAIR 43+AV+FELIX+FAURE+LYON+3EME">MISSION HAIR</a>
              </li>
            </ul>
          </p>
          <p>
            Une séléction de noms très originaux:
            <ul>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=LA+CHAMBRE+A+HAIR 2+RUE+GAUTTE+SAINT-GILLES-CROIX-DE-VIE">LA CHAMBRE A HAIR</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=VENT%27CONTR%27HAIR 14+RUE+DU+HAUT+PREFAILLES+PREFAILLES">VENT'CONTR'HAIR</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=TRALAL%27HAIR 39+RUE+ELISEE+CLAIS+FERQUES">TRALAL'HAIR</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=SAGIT+HAIR RUE+DES+BINELLES+CHAGNY">SAGIT HAIR</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=REVOLVHAIR 29+RUE+DES+BLANCS+MANTEAUX+PARIS+4">REVOLVHAIR</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=RECUP%27HAIR 32+RUE+FAIDHERBE+PARIS+11">RECUP'HAIR</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=NUCL+HAIR CHE+DU+PRADAS+MAUZAC">NUCL HAIR</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=NEFERTI%27TIF 6+RUE+HUBERT+DE+LA+BROSSE+ORVAULT">NEFERTI'TIF</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=NAMAST%27HAIR 12+RUE+ST+JEAN+CIRY-SALSOGNE">NAMAST'HAIR</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=LUCIF%27HAIR 2+CHE+DU+MARCHE+A+BLE+SAINT-MARDS-EN-OTHE">LUCIF'HAIR</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=IMP%27HAIRIAL 270+CHE+DU+CAMP+DE+LAMBERT+AUBAGNE">IMP'HAIRIAL</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=F%27HAIR+FORGE-COIFFURE 70+PL+DES+PLEIADES+SAINT-PIERRE-EN-FAUCIGNY">F'HAIR FORGE-COIFFURE</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=DIV+HAIR+GENS 16+BD+DE+L+EUROPE+MULHOUSE">DIV HAIR GENS</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=CYMIL%27HAIR 2+RLE+PETIT+JEAN+GRANCEY-LE-CHATEAU-NEUVELLE">CYMIL'HAIR</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=COLOCAT%27HAIR 1151+CHE+DU+PLAN+VISAN">COLOCAT'HAIR</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=CLAFOU%27TIFS 1+RUE+DES+QUARANTE+RETY">CLAFOU'TIFS</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=BUENO+S+HAIR 88+AV+VICTOR+HUGO+TULLE">BUENO S HAIR</a>
              </li>
              <li>
                <a target="_blank" href="https://maps.google.com/?q=BOUC+ET+MISS+HAIR 14+RUE+DE+L%27EGALITE+VILLENEUVE-SAINT-GERMAIN">BOUC ET MISS HAIR</a>
              </li>
            </ul>
            <p>
              Pour finir, il semble que depuis le début de l'enregistrements des établissements dans la base de l'INSEE, aucun salon de coiffure ne se soit appelé:
              <ul>
                <li>
                  'Apéritif'
                </li>
                <li>
                  'Culin'hair'
                </li>
              </ul>
            </p>
          </p>
        </div>
      </section>
      <section id="dmap">
        <h2>
          Stats par département
        </h2>
        <div id="deptmap"></div>
      </section>
      <section id="about">
        <h2>
          Informations & Méthodologie
        </h2>
        <div class="about">
          <h3>
            Qu'est-ce donc?
          </h3>
          <p>
            Ce site répertorie les établissements de coiffure (indiqués par le code  <a href="https://www.insee.fr/fr/metadonnees/nafr2/sousClasse/96.02A">Nomenclature d'Activité Française 96.02A</a>) dont les noms contiennent <strong>'coif'</strong>,  <strong>'mèche'</strong>,  <strong>'tif'</strong>, ou encore  <strong>'épi'</strong>, qui sont encore en activité au 1er août 2021, dans le but de détecter des jeux de mots ravissants. 
          </p>
          <h3>
            D'où viennent les données?
          </h3>
          <p>
            La source principale des données est l' <a href="https://www.insee.fr">INSEE (Institut national de la statistique et des études économiques)</a> qui gère également le répertoire système national d'identification et du répertoire des entreprises et de leurs établissements (SIRENE) comprenant les identifiants système d'identification du répertoire des entreprises (SIREN) des entreprises et SIRET de leurs différents établissements. 
          </p>
          <p>
            La base complète de tous les établissements est <a href="https://www.data.gouv.fr/en/datasets/base-sirene-des-entreprises-et-de-leurs-etablissements-siren-siret/">disponible ici</a>. Les deux bases utilisées sont <a href="https://files.data.gouv.fr/insee-sirene/StockEtablissement_utf8.zip">StockEtablissement_utf8.zip</a> et <a href="https://files.data.gouv.fr/insee-sirene/StockUniteLegale_utf8.zip">StockUniteLegale_utf8.zip</a>. La première base contient l'intégralité des entreprises et établissements. Toutefois certains noms d'établissements n'y apparaissent pas et la deuxième base est nécessaire pour en trouver des informations plus récentes.
          </p>
          <p>
            Malgré tout ceci, il semble que beaucoup de différences existent entre les bases INSEE et la "réalité" (telle que par exemple Google Maps permet d'explorer). Soit parce que les établissements ont fermé ou changé de nom depuis la date d'export de la base (1er août 2021), soit parce que certaines entreprises déclarées sont domiciliées dans une zone résidentielle, sans réel établissement (par exemple: les coiffeurs à domicile).
          </p>
          <h3>
            Méthodologie
          </h3>
          <p>
            Pour la sélection des noms à blague, parmis les 46000+ établissement de la base INSEE, une première passe consiste à sélectionner ceux dont le nom contiennent une de ces chaînes de caractère: <code>hair</code>, <code>tif</code>, <code>epi</code>, <code>mech</code>, ce qui réduit le compte à ~5700, puis de manuellement filtrer ceux qui contiennent effectivement un jeu de mots (et éliminer les nombreux "Hair Fashion" et autres "Hair Instituts, etc.), ce qui réduit la liste à ~4000. Ce traitement étant manuel, des oublis ont pu être faits sur des calembours les moins évidents... Pour cette étape, le script <code><a href="https://github.com/tifhair/tifhair-tools/blob/main/tools/blague.rb">blague.rb</a></code> facilite la revue des noms d'établissement.
          </p>
          <p>
            D'autres mots relatifs à la coiffure sont parfois utilisés pour des calembours, par exemple <code>coiff</code>. Un <a href="http://www.coiff-emoi-tremblay.com/">salon de Seine-Saint-Denis</a> s'appelle par exemple "Coiff'Emoi". Toutefois, un très grand nombre de coiffeurs ont cette chaine de caractère dans leur nom (plus de 21000), dont la plupart ne contiennent aucun jeu de mot particulier, ce qui rendrait un traitement manuel particulièrement fastidieux. 
          </p>
          <p>
            Dans les exemples de noms amusants, si plusieurs établissements ont le même nom, un d'entre eux sera pris au hasard lors de la génération du site.
          </p>
          <h3>
            Reconstruire le jeu de données de ce site
          </h3>
          <p>
            Une fois les bases téléchargées et décompressées, le script <code><a href="https://github.com/tifhair/tifhair-tools/blob/main/tools/sirene.rb">sirene.rb</a></code> pour construire le fichier<code> coiffeurs.sqlite</code> Ce script filtre les entrées du fichier <code>/tmp/StockEtablissement_utf8.csv</code> pour en extraire les établissements de coiffure, et d'autres informations concernant leur nom et adresse.
          </p>
          <p>
            Pour obtenir les coordonnées latitude/longitude à partir de l'adresse, il faut ensuite utiliser un service de geocoding. J'utilise ici la librairie<a href="https://github.com/alexreisner/geocoder"> Ruby Geocoder</a> qui permet d'accéder à la fois aux API de  <a href="https://geo.api.gouv.fr/adresse">l'etalab</a> ainsi qu'aux API de <a href="https://developers.google.com/maps/documentation/geocoding/overview"> Google</a> qui, elles, nécessitent une clé API.
          </p>
          <p>
            Le script <code><a href="https://github.com/tifhair/tifhair-tools/blob/main/tools/coords.rb">coords.rb</a></code> permet d'utiliser ces APIs. Lancer d'abord  <code>ruby coords.rb</code> pour mettre à jour le plus d'adresse avec l'API etalab, puis (après avoir mis à jour le fichier <code>.api_key  </code> avec votre clé API, lancer <code>ruby coords.rb google</code> pour obtenir le coordonnées des adresses qui n'ont pas pu être résolues avec l'etalab.
          </p>
          <p>
            Pour des soucis de performance, la totalité de la base de données est ensuite exportée au format geojson pour être utilisée par les cartes Leaflets ci-dessus. Le script <code><a href="https://github.com/tifhair/tifhair-tools/blob/main/tools/statify.rb">statify.rb</a></code> réalise les transformations nécessaires pour construire l'intégralité du site <a href="https://tif.hair">tif.hair</a> dans un répertoire de destination en lançant <code> ruby statify.rb src <destination></code>
          </p>
          <h3>
            Licences
          </h3>
          <ul>
            <li>
              <a href="https://www.etalab.gouv.fr/licence-ouverte-open-licence">Licence ouverte etalab</a>
            </li>
            <li>
              <a href="https://github.com/alexreisner/geocoder/blob/master/LICENSE">Ruby Geocoder MIT License</a>
            </li>
            <li>
              <a href="https://www.insee.fr/fr/information/2381863">Conditions utilisation données INSEE</a>
            </li>
            <li>
              <a href="https://github.com/Leaflet/Leaflet/blob/master/LICENSE">Leaflet License</a>
            </li>
            <li>
              <a href="https://github.com/Leaflet/Leaflet.markercluster/blob/master/MIT-LICENCE.txt">MarkerCluster MIT License</a>
            </li>
            <li>
              <a href="https://github.com/jgthms/minireset.css/blob/master/LICENSE">MiniReset MIT License</a>
            </li>
          </ul>
        </div>
      </section>
    </div>
    <script src="/js/coiffeurs.js"></script>
  </body>
</html>